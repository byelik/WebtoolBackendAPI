<?xml version="1.0" encoding="utf-8"?>
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark" 
		xmlns:mx="library://ns.adobe.com/flex/mx"
		creationComplete="skin1_creationCompleteHandler(event)">
	<!-- host component -->
	<fx:Metadata>
		[HostComponent("HostComponents.BeatsHostComponent.BeatsHostComponent")]
	</fx:Metadata>
	

	
	
	
	<fx:Script>
		<![CDATA[
			import mx.events.FlexEvent;
			import mx.collections.ArrayCollection;
			import mx.events.ListEvent;
			
					
			protected function skin1_creationCompleteHandler(event:FlexEvent):void
			{
//				mSave.contextMenu = hostComponent.treeContextMenu;
				mBeatsTree.contextMenu = hostComponent.treeContextMenu;
			}
			
			protected function mBeatsTree_itemClickHandler(event:ListEvent):void
			{
				var item:Object = Tree(event.currentTarget).selectedItem;
				if (mBeatsTree.dataDescriptor.isBranch(item)) 
				{
					mBeatsTree.expandItem(item, !mBeatsTree.isItemOpen(item), true);
				}
			}
			
			protected function renameItem(event:ListEvent):void
			{
				mBeatsTree.editable = true;
				mBeatsTree.editedItemPosition = {columnIndex:0, rowIndex:mBeatsTree.selectedIndex};
			}
			
			protected function tree1_itemEditEndHandler(event:ListEvent):void
			{
				mBeatsTree.editable = false;
			}
			
			
			
			[Bindable]
			private var expensesAC:ArrayCollection = new ArrayCollection( [
				{ Month: "Jan", Profit: 2000, Expenses: 1500, Amount: 450 },
				{ Month: "Feb", Profit: 1000, Expenses: 200, Amount: 600 },
				{ Month: "Mar", Profit: 1500, Expenses: 500, Amount: 300 },
				{ Month: "Apr", Profit: 1800, Expenses: 1200, Amount: 900 },
				{ Month: "May", Profit: 2400, Expenses: 575, Amount: 500 } ]);
			
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<s:SolidColor id="sc1" color="blue" alpha=".3"/>
		<s:SolidColorStroke id="stroke1" color="blue" weight="1"/>
		
		<s:Resize id="showBeatsTree" target="{mTreeBorderContainer}" widthTo="200" duration="500"/>
		<s:Resize id="hideBeatsTree" target="{mTreeBorderContainer}" widthTo="0" duration="500"/>
	</fx:Declarations>
	
	<s:Scroller width="100%" 
				height="700">
		<s:VGroup width="100%" height="100%" id="VerticalContentGroup">
			<s:HGroup>
				<s:TextInput id="mSearchField"
							 width="300"
							 prompt="Search"/>
				<s:Button id="mRefreshSearch"
						  label="Refresh"/>
							 
			</s:HGroup>
			<s:HGroup width="100%">
				<s:BorderContainer id="mTreeBorderContainer"
								   width="200" 
								   height="300" 
								   backgroundAlpha="0" 
								   borderStyle="inset" 
								   borderWeight="5">
					<s:HGroup width="100%" 
							  height="100%">
							<mx:Tree id="mBeatsTree" 
									 width="100%"
									 height="100%" 
									 allowMultipleSelection="true"
									 labelField="@label"
									 doubleClickEnabled="true"
									 dragEnabled="true"
									 dragMoveEnabled="true"
									 dropEnabled="true"
									 horizontalCenter="0"
									 itemDoubleClick="renameItem(event)"
									 itemEditEnd="tree1_itemEditEndHandler(event)"
									 showRoot="true"
									 borderVisible="false"
									 itemClick="mBeatsTree_itemClickHandler(event)"
									 contentBackgroundAlpha="0"
									 verticalScrollPolicy="auto">
								
								<mx:XMLListCollection id="MailBox">
									<fx:XMLList>
										<Description label="Mail">
											<folder label="INBOX"/>
											<folder label="Personal Folder">
												<Pfolder label="Business" />
												<Pfolder label="Demo" />
												<Pfolder label="Personal" isBrunch="true"/>
												<Pfolder label="Saved Mail" />
											</folder>
											<folder label="Sent" />
											<folder label="Trash" />
											<folder label="INBOX"/>
											<folder label="Personal Folder">
												<Pfolder label="Business" />
												<Pfolder label="Demo" />
												<Pfolder label="Personal" isBrunch="true"/>
												<Pfolder label="Saved Mail" />
											</folder>
											<folder label="Sent" />
											<folder label="Trash" />
											<folder label="INBOX"/>
											<folder label="Personal Folder">
												<Pfolder label="Business" />
												<Pfolder label="Demo" />
												<Pfolder label="Personal" isBrunch="true"/>
												<Pfolder label="Saved Mail" />
											</folder>
											<folder label="Sent" />
											<folder label="Trash" />
											<folder label="INBOX"/>
											<folder label="Personal Folder">
												<Pfolder label="Business" />
												<Pfolder label="Demo" />
												<Pfolder label="Personal" isBrunch="true"/>
												<Pfolder label="Saved Mail" />
												<folder label="Personal Folder">
													<Pfolder label="Business" />
													<Pfolder label="Demo" />
													<Pfolder label="Personal" isBrunch="true"/>
													<Pfolder label="Saved Mail" />
													<folder label="Personal Folder">
														<Pfolder label="Business" />
														<Pfolder label="Demo" />
														<Pfolder label="Personal" isBrunch="true"/>
														<Pfolder label="Saved Mail" />
														<folder label="Personal Folder">
															<Pfolder label="Business" />
															<Pfolder label="Demo" />
															<Pfolder label="Personal" isBrunch="true"/>
															<Pfolder label="Saved Mail" />
															<folder label="Personal Folder">
																<Pfolder label="Business" />
																<Pfolder label="Demo" />
																<Pfolder label="Personal" isBrunch="true"/>
																<Pfolder label="Saved Mail" />
															</folder>
														</folder>
													</folder>
												</folder>
											</folder>
											<folder label="Sent" />
											<folder label="Trash" />
											<folder label="INBOX"/>
											<folder label="Personal Folder">
												<Pfolder label="Business" />
												<Pfolder label="Demo" />
												<Pfolder label="Personal" isBrunch="true"/>
												<Pfolder label="Saved Mail" />
											</folder>
											<folder label="Sent" />
											<folder label="Trash" />
											<folder label="INBOX"/>
											<folder label="Personal Folder">
												<Pfolder label="Business" />
												<Pfolder label="Demo" />
												<Pfolder label="Personal" isBrunch="true"/>
												<Pfolder label="Saved Mail" />
											</folder>
											<folder label="Sent" />
											<folder label="Trash" />
										</Description>
									</fx:XMLList>
								</mx:XMLListCollection>
							</mx:Tree>
					
					</s:HGroup>
				</s:BorderContainer>
				<s:ToggleButton id="mTreeStateBtn"
								skinClass="Skins.SwitchButtonSkin.SwitchToggleButtonSkin"
								/>
				<s:BorderContainer id="mBeatsGraphBorderContainer"
								   width="100%"
								   height="100%">
					<mx:Canvas label="Canvas 2" width="100%" height="100%" backgroundColor="#323232" >
						
						<mx:Panel title="BubbleChart Control Example" height="100%" width="100%">
							<s:HGroup width="100%" horizontalAlign="left">
							</s:HGroup>
							<s:Button/>
							<mx:BubbleChart id="bubblechart" 
											height="100%" width="100%"
											paddingRight="5" paddingLeft="5" 
											showDataTips="false" maxRadius="20"
											dataProvider="{expensesAC}"
											showAllDataTips="false"
											dragEnabled="true"
											dragMoveEnabled="true"
											dropEnabled="true"
											selectionMode="multiple">
								<mx:series>
									<mx:BubbleSeries 
										displayName="Profit/Expenses/Amount" 
										xField="Profit" 
										yField="Expenses" 
										radiusField="Amount"
										fill="{sc1}"
										stroke="{stroke1}"/>
								</mx:series>            
							</mx:BubbleChart>            
							<mx:Legend dataProvider="{bubblechart}"/>            
						</mx:Panel>
					</mx:Canvas>	
				</s:BorderContainer>
				
						
				
			</s:HGroup>
			
			
			<s:HGroup>
				<s:VGroup>
					<!--<s:DropDownList id="mAgentList"
					labelField="label"
					width="90"
					prompt="Select agent"/>-->
					<!-- here must be visualization component of connections... -->
					<s:Label text="Description:"/>
					<s:TextArea id="mBeatDescriptionField"
								width="100%"
								height="76"
								prompt="Enter description"/>
					<s:HGroup width="100%" 
							  verticalAlign="middle">
						<s:HGroup width="100%" 
								  verticalAlign="middle">
							<s:Label text="Agent:"/>
							<s:DropDownList id="mChooseAgentList"
											width="90"
											prompt="Choose agent"/>	
						</s:HGroup>
						<s:HGroup width="100%"
								  horizontalAlign="center"
								  verticalAlign="middle">
							<s:Label text="XGML Theme:"/>
						</s:HGroup>
						<s:HGroup width="100%"
								  horizontalAlign="right">
							<s:TextInput id="mXgmlField"
										 width="90"
										 prompt="Choose XGML theme"/>
						</s:HGroup>	
					</s:HGroup>
					
					<s:HGroup width="100%"
							  verticalAlign="middle">
						<s:Label width="33" text="Type:"/>
						<s:DropDownList id="mTypeList"
										width="90"
										selectedItem="normal"
										dataProvider="{hostComponent.beatTypeList}"/>	
						<s:HGroup width="100%"
								  verticalAlign="middle">
							<s:HGroup width="80" horizontalAlign="left">
								<s:Label text="Priority:"/>	
							</s:HGroup>
							<s:HGroup width="100%"
									  horizontalAlign="left">
								<s:TextInput id="mPriorityField"
											 text="0"
											 width="50"
											 restrict="0-9"
											 maxChars="3"/>
							</s:HGroup>
						</s:HGroup>
					</s:HGroup>
					<s:Label text="Activities:"/>
					<s:TextArea id="mActivitiesField"
								prompt="Enter activities"
								width="100%"/>
					<s:HGroup width="100%"
							  horizontalAlign="center">
						<s:Button id="mSave"
								  label="SAVE" 
								  width="100%"/>
						<s:Button id="mDelete"
								  label="DELETE" 
								  width="100%"/>
					</s:HGroup>
				</s:VGroup>
				<s:VGroup>
					<s:Label text="Preconditions" 
							 fontWeight="bold" 
							 fontSize="14" 
							 color="0x000000"/>
					<s:HGroup verticalAlign="middle">
						<s:Label text="Beats completed:"/>
						<s:TextInput id="mBeatsCompletedField"
									 prompt="Comma - separated list fo ids"
									 width="120"/>	
					</s:HGroup>
					<s:HGroup
						verticalAlign="middle">
						<s:HGroup width="92" horizontalAlign="left">
							<s:Label text="Location:"/>	
						</s:HGroup>
						<s:DropDownList id="mLocationList"
										width="120"
										prompt="Choose location"/>
					</s:HGroup>
					<s:Label text="Facts known to user:"/>
					<s:DataGrid id="mFactsKnownToUser" 
								width="253"
								height="102">
						<s:columns>
							<s:ArrayList>
								<s:GridColumn dataField="id" headerText="id" width="30"/>
								<s:GridColumn dataField="description" headerText="Description"/>
							</s:ArrayList>
						</s:columns>
					</s:DataGrid>
					<s:Label text="Facts known to agent:"/>
					<s:DataGrid id="mFactsKnownToAgent"
								width="250"
								height="102">
						<s:columns>
							<s:ArrayList>
								<s:GridColumn dataField="id" headerText="id" width="30"/>
								<s:GridColumn dataField="description" headerText="Description"/>
							</s:ArrayList>
						</s:columns>
					</s:DataGrid>
				</s:VGroup>	
				<s:VGroup height="100%">
					<!--<s:Label text="Preconditions" 
					fontWeight="bold" 
					fontSize="14" 
					color="0x000000"/>
					<s:Label text="Description:"/>
					<s:TextArea id="mPreconditionsDescriptionField"
					prompt="Enter description"
					width="300"/>-->
					<s:Spacer/>
					<s:Spacer/>
					<s:Spacer/>					
					<s:HGroup width="100%"
							  horizontalAlign="center"
							  verticalAlign="middle" top="100">
						<s:HGroup>
							<s:Label text="Affinity:" 
									 textAlign="center"/>	
						</s:HGroup>
						<s:TextInput id="mAffinityMinField"
									 text="0"
									 width="50"
									 restrict="0-9"
									 maxChars="3"/>
						<s:TextInput id="mAffinityMaxField"
									 text="0"
									 width="50"
									 restrict="0-9"
									 maxChars="3"/>
					</s:HGroup>
					<s:HGroup width="100%"
							  horizontalAlign="center"
							  verticalAlign="middle">
						<s:HGroup>
							<s:Label text="Nerve:" 
									 textAlign="center"/>	
						</s:HGroup>
						<s:TextInput id="mNerveMinField" 
									 text="0"
									 width="50"
									 restrict="0-9"
									 maxChars="3"/>
						<s:TextInput id="mNerveMaxField"
									 text="0"
									 width="50"
									 restrict="0-9"
									 maxChars="3"/>
					</s:HGroup>
					<s:Label text="Memory:" 
							 textAlign="center"/>
					<s:DataGrid id="mBeatVariableList" width="100%" height="228"
								dataProvider="{hostComponent.mBeatVariables}">
						<s:columns>
							<s:ArrayList>
								<s:GridColumn dataField="variable" headerText="Variable"/>
								<s:GridColumn dataField="value" headerText="Value"/>
							</s:ArrayList>
						</s:columns>
					</s:DataGrid>
				</s:VGroup>
			</s:HGroup>	
		</s:VGroup>
	</s:Scroller>
</s:Skin>
